# Music Mapping App

音楽の特徴を2次元マップ上で可視化するReactアプリケーションです。

## 🚀 機能

- **音楽マップ作成**: X軸とY軸を設定して音楽の特徴をマッピング
- **楽曲検索・追加**: 楽曲を検索してマップに追加
- **インタラクティブな可視化**: D3.jsを使用したズーム・パン機能
- **楽曲プレビュー**: 楽曲のプレビュー再生機能
- **ドラッグ可能なカード**: 楽曲詳細をドラッグ可能なカードで表示

## 📁 プロジェクト構造

```
src/
├── components/          # Reactコンポーネント
│   ├── ui/             # 再利用可能なUIコンポーネント
│   ├── AudioPlayer.tsx # 音声プレイヤー
│   ├── FloatingCard.tsx # ドラッグ可能な楽曲カード
│   ├── ScatterPlot.tsx # D3.jsを使用した散布図
│   ├── Sidebar.tsx     # 検索・追加サイドバー
│   └── TopBar.tsx      # マップ作成用トップバー
├── hooks/              # カスタムフック
│   └── useSongs.ts     # 楽曲管理と検索のロジック
├── types/              # TypeScript型定義
│   └── index.ts        # 共通型定義
├── data/               # データとユーティリティ
│   └── mockData.ts     # モックデータとAPIシミュレーション
├── constants/          # 定数定義
│   └── index.ts        # アプリケーション定数
├── utils/              # ユーティリティ関数
│   └── index.ts        # 共通ユーティリティ
├── App.tsx             # メインアプリケーション
└── main.tsx            # エントリーポイント
```

## 🛠️ 技術スタック

- **React 18** - UIライブラリ
- **TypeScript** - 型安全性
- **D3.js** - データ可視化
- **Tailwind CSS** - スタイリング
- **Radix UI** - アクセシブルなUIコンポーネント
- **Lucide React** - アイコン
- **Sonner** - トースト通知
- **Vite** - ビルドツール

## 🎯 アーキテクチャの特徴

### 1. 型安全性
- すべてのコンポーネントとフックでTypeScriptを使用
- 共通型定義を`types/index.ts`で管理

### 2. 関心の分離
- **コンポーネント**: UI表示のみに集中
- **フック**: ビジネスロジックと状態管理
- **ユーティリティ**: 再利用可能な関数
- **定数**: 設定値の一元管理

### 3. カスタムフック
- `useSongs`: 楽曲のCRUD操作
- `useSongSearch`: 検索機能
- `useSongSelection`: 選択状態管理

### 4. データ管理
- モックデータとAPIシミュレーション
- 座標生成とフィルタリング機能
- 検索ロジックの分離

## 🚀 開発

```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev

# ビルド
npm run build
```

## 📝 主要な改善点

### リファクタリング前の問題
- 型定義が`App.tsx`に散在
- コンポーネントが複数の責任を持っていた
- ハードコードされたデータとメッセージ
- 重複したロジック

### リファクタリング後の改善
- ✅ 型定義の分離と一元管理
- ✅ コンポーネントの責任分離
- ✅ カスタムフックによるロジック分離
- ✅ 定数による設定値の一元管理
- ✅ ユーティリティ関数の再利用性向上
- ✅ コードの可読性と保守性の向上

## 🎨 UI/UX

- **レスポンシブデザイン**: モバイル・デスクトップ対応
- **アクセシビリティ**: Radix UIによるアクセシブルなコンポーネント
- **アニメーション**: スムーズなトランジションとフィードバック
- **直感的な操作**: ドラッグ&ドロップ、ズーム、パン機能

## 🔮 今後の拡張予定

- [ ] 実際の音楽APIとの連携
- [ ] 楽曲の特徴分析機能
- [ ] マップの保存・読み込み機能
- [ ] ユーザー認証とプレイリスト管理
- [ ] リアルタイム協調機能